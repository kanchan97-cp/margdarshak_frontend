{"ast":null,"code":"const express = require(\"express\");\nconst Quiz = require(\"../models/Quiz\");\nconst Report = require(\"../models/Report\");\nconst authMiddleware = require(\"../middleware/auth\");\nconst router = express.Router();\nrouter.use(authMiddleware);\nrouter.post(\"/generate\", async (req, res) => {\n  try {\n    const quizzes = await Quiz.find({\n      userId: req.user.id,\n      completed: true\n    });\n    if (quizzes.length < 5) {\n      return res.status(400).json({\n        error: \"Please complete all 5 quizzes first!\"\n      });\n    }\n\n    // AI-based structure (Mock for now)\n    const careers = [{\n      career: \"Software Developer\",\n      reason: \"Strong logical thinking and technical interest\",\n      roadmap: [\"Learn JavaScript + React\", \"Build 5–10 real projects\", \"Internships / Freelancing\"]\n    }, {\n      career: \"Data Analyst\",\n      reason: \"Good analytical mindset and interest in numbers\",\n      roadmap: [\"Learn Excel + SQL\", \"Learn Power BI / Tableau\", \"Intern Data Analyst roles\"]\n    }, {\n      career: \"Product Manager\",\n      reason: \"Good communication and problem-solving skills\",\n      roadmap: [\"Learn Agile + UX\", \"Build Product Case Studies\", \"Apply PM Internships\"]\n    }];\n    const report = await Report.create({\n      userId: req.user.id,\n      title: `Career Report - ${new Date().toLocaleDateString()}`,\n      careers\n    });\n    res.status(201).json(report);\n  } catch (err) {\n    console.error(\"Report Generation Error:\", err);\n    res.status(500).json({\n      error: \"Internal Server Error\"\n    });\n  }\n});\nrouter.get(\"/\", async (req, res) => {\n  try {\n    const reports = await Report.find({\n      userId: req.user.id\n    }).sort({\n      createdAt: -1\n    });\n    res.json({\n      data: reports,\n      totalPages: 1\n    });\n  } catch {\n    res.status(500).json({\n      error: \"Failed to fetch reports\"\n    });\n  }\n});\nmodule.exports = router;","map":{"version":3,"names":["express","require","Quiz","Report","authMiddleware","router","Router","use","post","req","res","quizzes","find","userId","user","id","completed","length","status","json","error","careers","career","reason","roadmap","report","create","title","Date","toLocaleDateString","err","console","get","reports","sort","createdAt","data","totalPages","module","exports"],"sources":["/Users/kanchanrani/margdarshak/frontend/src/components/Report.js"],"sourcesContent":["const express = require(\"express\");\nconst Quiz = require(\"../models/Quiz\");\nconst Report = require(\"../models/Report\");\nconst authMiddleware = require(\"../middleware/auth\");\n\nconst router = express.Router();\n\nrouter.use(authMiddleware);\n\nrouter.post(\"/generate\", async (req, res) => {\n  try {\n    const quizzes = await Quiz.find({ userId: req.user.id, completed: true });\n\n    if (quizzes.length < 5) {\n      return res.status(400).json({ error: \"Please complete all 5 quizzes first!\" });\n    }\n\n    // AI-based structure (Mock for now)\n    const careers = [\n      {\n        career: \"Software Developer\",\n        reason: \"Strong logical thinking and technical interest\",\n        roadmap: [\n          \"Learn JavaScript + React\",\n          \"Build 5–10 real projects\",\n          \"Internships / Freelancing\"\n        ]\n      },\n      {\n        career: \"Data Analyst\",\n        reason: \"Good analytical mindset and interest in numbers\",\n        roadmap: [\n          \"Learn Excel + SQL\",\n          \"Learn Power BI / Tableau\",\n          \"Intern Data Analyst roles\"\n        ]\n      },\n      {\n        career: \"Product Manager\",\n        reason: \"Good communication and problem-solving skills\",\n        roadmap: [\n          \"Learn Agile + UX\",\n          \"Build Product Case Studies\",\n          \"Apply PM Internships\"\n        ]\n      }\n    ];\n\n    const report = await Report.create({\n      userId: req.user.id,\n      title: `Career Report - ${new Date().toLocaleDateString()}`,\n      careers\n    });\n\n    res.status(201).json(report);\n  } catch (err) {\n    console.error(\"Report Generation Error:\", err);\n    res.status(500).json({ error: \"Internal Server Error\" });\n  }\n});\n\nrouter.get(\"/\", async (req, res) => {\n  try {\n    const reports = await Report.find({ userId: req.user.id }).sort({ createdAt: -1 });\n    res.json({ data: reports, totalPages: 1 });\n  } catch {\n    res.status(500).json({ error: \"Failed to fetch reports\" });\n  }\n});\n\nmodule.exports = router;\n"],"mappings":"AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,MAAMC,IAAI,GAAGD,OAAO,CAAC,gBAAgB,CAAC;AACtC,MAAME,MAAM,GAAGF,OAAO,CAAC,kBAAkB,CAAC;AAC1C,MAAMG,cAAc,GAAGH,OAAO,CAAC,oBAAoB,CAAC;AAEpD,MAAMI,MAAM,GAAGL,OAAO,CAACM,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,GAAG,CAACH,cAAc,CAAC;AAE1BC,MAAM,CAACG,IAAI,CAAC,WAAW,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EAC3C,IAAI;IACF,MAAMC,OAAO,GAAG,MAAMT,IAAI,CAACU,IAAI,CAAC;MAAEC,MAAM,EAAEJ,GAAG,CAACK,IAAI,CAACC,EAAE;MAAEC,SAAS,EAAE;IAAK,CAAC,CAAC;IAEzE,IAAIL,OAAO,CAACM,MAAM,GAAG,CAAC,EAAE;MACtB,OAAOP,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAuC,CAAC,CAAC;IAChF;;IAEA;IACA,MAAMC,OAAO,GAAG,CACd;MACEC,MAAM,EAAE,oBAAoB;MAC5BC,MAAM,EAAE,gDAAgD;MACxDC,OAAO,EAAE,CACP,0BAA0B,EAC1B,0BAA0B,EAC1B,2BAA2B;IAE/B,CAAC,EACD;MACEF,MAAM,EAAE,cAAc;MACtBC,MAAM,EAAE,iDAAiD;MACzDC,OAAO,EAAE,CACP,mBAAmB,EACnB,0BAA0B,EAC1B,2BAA2B;IAE/B,CAAC,EACD;MACEF,MAAM,EAAE,iBAAiB;MACzBC,MAAM,EAAE,+CAA+C;MACvDC,OAAO,EAAE,CACP,kBAAkB,EAClB,4BAA4B,EAC5B,sBAAsB;IAE1B,CAAC,CACF;IAED,MAAMC,MAAM,GAAG,MAAMtB,MAAM,CAACuB,MAAM,CAAC;MACjCb,MAAM,EAAEJ,GAAG,CAACK,IAAI,CAACC,EAAE;MACnBY,KAAK,EAAE,mBAAmB,IAAIC,IAAI,CAAC,CAAC,CAACC,kBAAkB,CAAC,CAAC,EAAE;MAC3DR;IACF,CAAC,CAAC;IAEFX,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACM,MAAM,CAAC;EAC9B,CAAC,CAAC,OAAOK,GAAG,EAAE;IACZC,OAAO,CAACX,KAAK,CAAC,0BAA0B,EAAEU,GAAG,CAAC;IAC9CpB,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAAwB,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC;AAEFf,MAAM,CAAC2B,GAAG,CAAC,GAAG,EAAE,OAAOvB,GAAG,EAAEC,GAAG,KAAK;EAClC,IAAI;IACF,MAAMuB,OAAO,GAAG,MAAM9B,MAAM,CAACS,IAAI,CAAC;MAAEC,MAAM,EAAEJ,GAAG,CAACK,IAAI,CAACC;IAAG,CAAC,CAAC,CAACmB,IAAI,CAAC;MAAEC,SAAS,EAAE,CAAC;IAAE,CAAC,CAAC;IAClFzB,GAAG,CAACS,IAAI,CAAC;MAAEiB,IAAI,EAAEH,OAAO;MAAEI,UAAU,EAAE;IAAE,CAAC,CAAC;EAC5C,CAAC,CAAC,MAAM;IACN3B,GAAG,CAACQ,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,KAAK,EAAE;IAA0B,CAAC,CAAC;EAC5D;AACF,CAAC,CAAC;AAEFkB,MAAM,CAACC,OAAO,GAAGlC,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}